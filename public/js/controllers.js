var helpenControllers=angular.module("helpenControllers",[]);helpenControllers.controller("FirstController",["$scope","User",function($scope,User){$scope.lat=40.1095828,$scope.lng=-88.2117322,navigator.geolocation.getCurrentPosition(function(pos){lat=pos.coords.latitude,lng=pos.coords.longitude,$scope.lat=lat,$scope.lng=lng},function(err){console.error("Error fetching gps coordinates.")},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})}]),helpenControllers.controller("LoginController",["$scope","User",function($scope,User){$scope.login=function(){var id=$scope.username,pw=$scope.password;User.login(id,pw).then(function(resp){200==resp.status?(sessionStorage.setItem("login",id),window.location.assign("/#/subjects")):(alert("Login failed"),console.log(resp))},function(resp){alert("Login failed"),console.log(resp)})},$scope.regUser=function(){window.location.assign("/#/register")}}]),helpenControllers.controller("ChatController",["$scope","User",function($scope,User){var user=sessionStorage.getItem("login"),sock=new SockJS("http://localhost:4000/chat");$scope.messages=[],$scope.sendMessage=function(){sock.send($scope.messageText),$scope.messageText=""},sock.onmessage=function(e){$scope.messages.push(e.data),$scope.$apply()},(void 0===user||""==user||null==user)&&window.location.assign("/"),$scope.user=user}]),helpenControllers.controller("RegisterController",["$scope","User",function($scope,User){$scope.regUser=function(){""!=$scope.username&&User.addUser($scope.username,$scope.password,$scope.name,$scope.email).then(function(resp){console.log(resp),alert("Success!")},function(resp){alert("User.addUser() failed"),console.log(resp)})}}]),helpenControllers.controller("SubjectController",["$scope","User",function($scope,User){var user=sessionStorage.getItem("login");(void 0===user||""==user||null==user)&&window.location.assign("/"),$scope.user=user}]);